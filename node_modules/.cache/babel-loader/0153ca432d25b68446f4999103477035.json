{"ast":null,"code":"const inittialState = {\n  basket: [// { id, left, amount },\n    // { id, left, amount },\n  ],\n  finally: 0,\n  error: null\n};\n\nconst basket = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : inittialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"get/basket/pending\":\n      return { ...state,\n        geting: true,\n        error: null\n      };\n\n    case \"get/basket/fulfilled\":\n      return { ...state,\n        geting: false,\n        basket: [...action.payload.basket.products.map(product => product)]\n      };\n\n    case \"get/basket/rejected\":\n      return { ...state,\n        geting: false,\n        error: action.error\n      };\n\n    case \"addproduct/inbasket/pending\":\n      return { ...state,\n        adding: true,\n        error: null\n      };\n\n    case \"addproduct/inbasket/fulfilled\":\n      const id = action.payload.productinBasket._id;\n      const left = action.payload.productinBasket.left--;\n      console.log(action.payload.productLeft);\n      return { ...state,\n        adding: false,\n        basket: [...state.basket, {\n          id,\n          left,\n          amount: 1\n        }],\n        finally: \"\"\n      };\n\n    case \"addproduct/inbasket/rejected\":\n      return { ...state,\n        adding: false,\n        error: action.error\n      };\n\n    case \"deleteproduct/frombasket/pending\":\n      return { ...state,\n        deleting: true,\n        error: null\n      };\n\n    case \"deleteproduct/inbasket/fulfilled\":\n      return { ...state,\n        deleting: false,\n        basket: [...state.basket.filter(product => product.id !== action.payload)]\n      };\n\n    case \"deleteproduct/inbasket/rejected\":\n      return { ...state,\n        deleting: false,\n        error: action.error\n      };\n\n    case \"addamount/productinbasket/pending\":\n      return { ...state,\n        addingAmout: true,\n        error: null\n      };\n\n    case \"addamount/productinbasket/fulfilled\":\n      return { ...state,\n        addingAmout: false,\n        basket: [...state.basket.map(product => {\n          if (product.id === action.payload) {\n            if (product.left > 0) {\n              product.left -= 1;\n              product.amount += 1;\n            }\n          }\n\n          return product;\n        })]\n      };\n\n    case \"addamount/productinbasket/rejected\":\n      return { ...state,\n        addingAmout: false,\n        error: action.error\n      };\n\n    case \"removeamount/productinbasket/pending\":\n      return { ...state,\n        removeAmout: true,\n        error: null\n      };\n\n    case \"removeamount/productinbasket/fulfilled\":\n      return { ...state,\n        removeAmout: false,\n        basket: [...state.basket.map(product => {\n          if (product.id === action.payload) {\n            if (product.amount > 1) {\n              product.left += 1;\n              product.amount -= 1;\n            }\n          }\n\n          return product;\n        })]\n      };\n\n    case \"removeamount/productinbasket/rejected\":\n      return { ...state,\n        removeAmout: false,\n        error: action.error\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const getAllProductsInBasket = () => {\n  return async (dispatch, getState) => {\n    const state = getState();\n    dispatch({\n      type: \"get/basket/pending\"\n    });\n\n    try {\n      const res = await fetch(\"http://localhost:4000/basket\", {\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${state.application.token}`\n        }\n      });\n      const basket = await res.json();\n      dispatch({\n        type: \"get/basket/fulfilled\",\n        payload: {\n          basket\n        }\n      });\n    } catch (error) {\n      dispatch({\n        type: \"get/basket/rejected\",\n        error: error\n      });\n    }\n  };\n};\nexport const addProductInBasket = id => {\n  return async (dispatch, getState) => {\n    dispatch({\n      type: \"addproduct/inbasket/pending\"\n    });\n    const state = getState();\n    const productLeft = state.products.products;\n\n    try {\n      const res = await fetch(`http://localhost:4000/addproductinbasket/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${state.application.token}`\n        }\n      });\n      const productinBasket = await res.json();\n      dispatch({\n        type: \"addproduct/inbasket/fulfilled\",\n        payload: {\n          productinBasket,\n          productLeft,\n          id\n        }\n      });\n    } catch (error) {\n      dispatch({\n        type: \"addproduct/inbasket/rejected\",\n        error: error\n      });\n    }\n  };\n};\nexport const deleteProductFromBasket = id => {\n  return async (dispatch, getState) => {\n    dispatch({\n      type: \"deleteproduct/frombasket/pending\"\n    });\n    const state = getState();\n\n    try {\n      await fetch(`http://localhost:4000/deleteProductFromBasket/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${state.application.token}`\n        }\n      });\n      dispatch({\n        type: \"deleteproduct/inbasket/fulfilled\",\n        payload: id\n      });\n    } catch (error) {\n      dispatch({\n        type: \"deleteproduct/inbasket/rejected\",\n        error: error\n      });\n    }\n  };\n};\nexport const addAmountProductinBasket = id => {\n  return async (dispatch, getState) => {\n    const state = getState();\n    dispatch({\n      type: \"addamount/productinbasket/pending\"\n    });\n\n    try {\n      await fetch(`http://localhost:4000/addAmountProductinBasket/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${state.application.token}`\n        }\n      });\n      dispatch({\n        type: \"addamount/productinbasket/fulfilled\",\n        payload: id\n      });\n    } catch (error) {\n      dispatch({\n        type: \"addamount/productinbasket/rejected\",\n        error: error\n      });\n    }\n  };\n};\nexport const removeAmountProductinBasket = id => {\n  return async (dispatch, getState) => {\n    const state = getState();\n    dispatch({\n      type: \"removeamount/productinbasket/pending\"\n    });\n\n    try {\n      await fetch(`http://localhost:4000/removeAmountProductinBasket/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${state.application.token}`\n        }\n      });\n      dispatch({\n        type: \"removeamount/productinbasket/fulfilled\",\n        payload: id\n      });\n    } catch (error) {\n      dispatch({\n        type: \"removeamount/productinbasket/rejected\",\n        error: error\n      });\n    }\n  };\n};\nexport default basket;","map":{"version":3,"sources":["/Users/islam/intocode/newProductSait/frontForProductSait/my-app/src/redux/features/basket.js"],"names":["inittialState","basket","finally","error","state","action","type","geting","payload","products","map","product","adding","id","productinBasket","_id","left","console","log","productLeft","amount","deleting","filter","addingAmout","removeAmout","getAllProductsInBasket","dispatch","getState","res","fetch","headers","Authorization","application","token","json","addProductInBasket","method","deleteProductFromBasket","addAmountProductinBasket","removeAmountProductinBasket"],"mappings":"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","sourcesContent":["const inittialState = {\n  basket: [\n    // { id, left, amount },\n    // { id, left, amount },\n  ],\n  finally: 0,\n  error: null,\n};\n\nconst basket = (state = inittialState, action) => {\n  switch (action.type) {\n    case \"get/basket/pending\":\n      return {\n        ...state,\n        geting: true,\n        error: null,\n      };\n    case \"get/basket/fulfilled\":\n      return {\n        ...state,\n        geting: false,\n        basket: [...action.payload.basket.products.map((product) => product)],\n      };\n    case \"get/basket/rejected\":\n      return {\n        ...state,\n        geting: false,\n        error: action.error,\n      };\n    case \"addproduct/inbasket/pending\":\n      return {\n        ...state,\n        adding: true,\n        error: null,\n      };\n    case \"addproduct/inbasket/fulfilled\":\n      const id = action.payload.productinBasket._id;\n      const left = action.payload.productinBasket.left--;\n      console.log(action.payload.productLeft);\n      return {\n        ...state,\n        adding: false,\n        basket: [...state.basket, { id, left, amount: 1 }],\n        finally: \"\",\n      };\n    case \"addproduct/inbasket/rejected\":\n      return {\n        ...state,\n        adding: false,\n        error: action.error,\n      };\n    case \"deleteproduct/frombasket/pending\":\n      return {\n        ...state,\n        deleting: true,\n        error: null,\n      };\n    case \"deleteproduct/inbasket/fulfilled\":\n      return {\n        ...state,\n        deleting: false,\n        basket: [\n          ...state.basket.filter((product) => product.id !== action.payload),\n        ],\n      };\n    case \"deleteproduct/inbasket/rejected\":\n      return {\n        ...state,\n        deleting: false,\n        error: action.error,\n      };\n    case \"addamount/productinbasket/pending\":\n      return {\n        ...state,\n        addingAmout: true,\n        error: null,\n      };\n    case \"addamount/productinbasket/fulfilled\":\n      return {\n        ...state,\n        addingAmout: false,\n        basket: [\n          ...state.basket.map((product) => {\n            if (product.id === action.payload) {\n              if (product.left > 0) {\n                product.left -= 1;\n                product.amount += 1;\n              }\n            }\n            return product;\n          }),\n        ],\n      };\n    case \"addamount/productinbasket/rejected\":\n      return {\n        ...state,\n        addingAmout: false,\n        error: action.error,\n      };\n    case \"removeamount/productinbasket/pending\":\n      return {\n        ...state,\n        removeAmout: true,\n        error: null,\n      };\n    case \"removeamount/productinbasket/fulfilled\":\n      return {\n        ...state,\n        removeAmout: false,\n        basket: [\n          ...state.basket.map((product) => {\n            if (product.id === action.payload) {\n              if (product.amount > 1) {\n                product.left += 1;\n                product.amount -= 1;\n              }\n            }\n            return product;\n          }),\n        ],\n      };\n    case \"removeamount/productinbasket/rejected\":\n      return {\n        ...state,\n        removeAmout: false,\n        error: action.error,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const getAllProductsInBasket = () => {\n  return async (dispatch, getState) => {\n    const state = getState();\n    dispatch({ type: \"get/basket/pending\" });\n    try {\n      const res = await fetch(\"http://localhost:4000/basket\", {\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${state.application.token}`,\n        },\n      });\n      const basket = await res.json();\n      dispatch({\n        type: \"get/basket/fulfilled\",\n        payload: {\n          basket,\n        },\n      });\n    } catch (error) {\n      dispatch({ type: \"get/basket/rejected\", error: error });\n    }\n  };\n};\n\nexport const addProductInBasket = (id) => {\n  return async (dispatch, getState) => {\n    dispatch({ type: \"addproduct/inbasket/pending\" });\n    const state = getState();\n    const productLeft = state.products.products;\n    try {\n      const res = await fetch(\n        `http://localhost:4000/addproductinbasket/${id}`,\n        {\n          method: \"PATCH\",\n          headers: {\n            \"Content-type\": \"application/json\",\n            Authorization: `Bearer ${state.application.token}`,\n          },\n        }\n      );\n      const productinBasket = await res.json();\n      dispatch({\n        type: \"addproduct/inbasket/fulfilled\",\n        payload: {\n          productinBasket,\n          productLeft,\n          id,\n        },\n      });\n    } catch (error) {\n      dispatch({ type: \"addproduct/inbasket/rejected\", error: error });\n    }\n  };\n};\n\nexport const deleteProductFromBasket = (id) => {\n  return async (dispatch, getState) => {\n    dispatch({ type: \"deleteproduct/frombasket/pending\" });\n    const state = getState();\n    try {\n      await fetch(`http://localhost:4000/deleteProductFromBasket/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${state.application.token}`,\n        },\n      });\n      dispatch({ type: \"deleteproduct/inbasket/fulfilled\", payload: id });\n    } catch (error) {\n      dispatch({ type: \"deleteproduct/inbasket/rejected\", error: error });\n    }\n  };\n};\n\nexport const addAmountProductinBasket = (id) => {\n  return async (dispatch, getState) => {\n    const state = getState();\n    dispatch({ type: \"addamount/productinbasket/pending\" });\n    try {\n      await fetch(`http://localhost:4000/addAmountProductinBasket/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${state.application.token}`,\n        },\n      });\n\n      dispatch({\n        type: \"addamount/productinbasket/fulfilled\",\n        payload: id,\n      });\n    } catch (error) {\n      dispatch({ type: \"addamount/productinbasket/rejected\", error: error });\n    }\n  };\n};\n\nexport const removeAmountProductinBasket = (id) => {\n  return async (dispatch, getState) => {\n    const state = getState();\n    dispatch({ type: \"removeamount/productinbasket/pending\" });\n    try {\n      await fetch(`http://localhost:4000/removeAmountProductinBasket/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${state.application.token}`,\n        },\n      });\n      dispatch({ type: \"removeamount/productinbasket/fulfilled\", payload: id });\n    } catch (error) {\n      dispatch({ type: \"removeamount/productinbasket/rejected\", error: error });\n    }\n  };\n};\n\nexport default basket;\n"]},"metadata":{},"sourceType":"module"}